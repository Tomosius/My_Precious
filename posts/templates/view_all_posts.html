{% extends 'base_template.html' %}

{% block content %}

<!-- Nav tabs -->
<ul class="nav nav-tabs">
    <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#all-posts">All Posts</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#lost-posts">Lost Posts</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#found-posts">Found Posts</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#show-map">Show on Map</a>
    </li>
</ul>

<!-- Tab panes -->
<div class="tab-content mb-5">
    <div class="tab-pane fade show active" id="all-posts">
        <!-- Display all posts here -->

            {% for post in all_posts %}
	            <a href="{{ post.get_absolute_url }}" style="text-decoration: none; color: inherit;">
                <p>
                <strong>{{ post.title|truncatechars:10 }}</strong><br>
                {{ post.description|truncatechars:50 }}
                </p>
				</a>
            {% endfor %}

    </div>
    <div class="tab-pane fade" id="lost-posts">
        <!-- Display lost posts here -->

            {% for post in lost_posts %}
                <a href="{{ post.get_absolute_url }}" style="text-decoration: none; color: inherit;">
                <p>
                <strong>{{ post.title|truncatechars:10 }}</strong><br>
                {{ post.description|truncatechars:50 }}
                </p>
				</a>
            {% endfor %}

    </div>
    <div class="tab-pane fade" id="found-posts">
        <!-- Display found posts here -->

            {% for post in found_posts %}
                <a href="{{ post.get_absolute_url }}" style="text-decoration: none; color: inherit;">
                <p>
                <strong>{{ post.title|truncatechars:10 }}</strong><br>
                {{ post.description|truncatechars:50 }}
                </p>
				</a>
            {% endfor %}

    </div>
    <div class="tab-pane fade" id="show-map">
        <!-- Display map here -->
        <!-- You can add the code for showing the map here -->
    </div>
</div>

{% endblock %}

{% block javascript %}
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
        let isAuthenticated = {{ is_authenticated|yesno:"true,false" }};
        if (!isAuthenticated) {
            let links = document.querySelectorAll('a[href^="/"]');
            links.forEach(function(link) {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    alert('Please log in to view post details.');
                });
            });
        }
    });
</script>
{% endblock %}
